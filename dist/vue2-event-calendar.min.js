/*!
  * vue2-event-calendar.js v0.4.3
  * (c) 2018 Kitwang Chen
  * Released under the MIT License.
  */
"use strict";var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}var dayjs_min=createCommonjsModule(function(t,e){var m,i,o,y,D,$,p,n,r,a,s,h,M,u,c,d;t.exports=(m="second",i="minute",o="hour",y="day",D="week",$="month",p="year",n="Sunday.Monday.Tuesday.Wednesday.Thursday.Friday.Saturday".split("."),r="January.February.March.April.May.June.July.August.September.October.November.December".split("."),a=/^(\d{4})-?(\d{2})-?(\d{1,2})(.*(\d{2}):(\d{2}):(\d{2}))?.?(\d{3})?$/,s=/\[.*?\]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},M=function(t){return t&&String(t).toLowerCase().replace(/s$/,"")},u=function(t){return void 0===t},c=function(t){var e;return null===t?new Date(NaN):u(t)?new Date:t instanceof Date?t:(e=String(t).match(a))?new Date(e[1],e[2]-1,e[3],e[5],e[6],e[7],e[8]||0):new Date(t)},d=function(){function l(t){this.$d=c(t),this.init()}var t=l.prototype;return t.init=function(){var t,e,n,r,a;this.$zone=this.$d.getTimezoneOffset(),this.$zoneStr=(t=this.$zone,e=Math.abs(t),n=t<=0?"+":"-",r=Math.floor(e/60),a=e%60,""+n+h(r,2,"0")+":"+h(a,2,"0")),this.$y=this.$d.getFullYear(),this.$M=this.$d.getMonth(),this.$D=this.$d.getDate(),this.$W=this.$d.getDay(),this.$H=this.$d.getHours(),this.$m=this.$d.getMinutes(),this.$s=this.$d.getSeconds(),this.$ms=this.$d.getMilliseconds()},t.isValid=function(){return!("Invalid Date"===this.$d.toString())},t.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0},t.isSame=function(t){return this.valueOf()===t.valueOf()},t.isBefore=function(t){return this.valueOf()<t.valueOf()},t.isAfter=function(t){return this.valueOf()>t.valueOf()},t.year=function(){return this.$y},t.month=function(){return this.$M},t.day=function(){return this.$W},t.date=function(){return this.$D},t.hour=function(){return this.$H},t.minute=function(){return this.$m},t.second=function(){return this.$s},t.millisecond=function(){return this.$ms},t.unix=function(){return Math.floor(this.valueOf()/1e3)},t.valueOf=function(){return this.$d.getTime()},t.startOf=function(t,e){var a=this,s=!!u(e)||e,n=function(t,e,n){void 0===n&&(n=a.$y);var r=new l(new Date(n,e,t));return s?r:r.endOf(y)},r=function(t,e){return new l(a.toDate()[t].apply(a.toDate(),s?[0,0,0,0].slice(e):[23,59,59,999].slice(e)))};switch(M(t)){case p:return s?n(1,0):n(31,11,this.$y);case $:return s?n(1,this.$M):n(0,this.$M+1,this.$y);case D:return s?n(this.$D-this.$W,this.$M):n(this.$D+(6-this.$W),this.$M,this.$y);case y:case"date":return r("setHours",0);case o:return r("setMinutes",1);case i:return r("setSeconds",2);case m:return r("setMilliseconds",3);default:return this.clone()}},t.endOf=function(t){return this.startOf(t,!1)},t.mSet=function(t,e){switch(M(t)){case"date":this.$d.setDate(e);break;case $:this.$d.setMonth(e);break;case p:this.$d.setFullYear(e);break;case o:this.$d.setHours(e);break;case i:this.$d.setMinutes(e);break;case m:this.$d.setSeconds(e);break;case"millisecond":this.$d.setMilliseconds(e)}return this.init(),this},t.set=function(t,e){return this.clone().mSet(t,e)},t.add=function(t,e){var n,r=e&&1===e.length?e:M(e);if(-1<["M",$].indexOf(r)){var a=this.set("date",1).set($,this.$M+t);return a=a.set("date",Math.min(this.$D,a.daysInMonth()))}if(-1<["y",p].indexOf(r))return this.set(p,this.$y+t);switch(r){case"m":case i:n=6e4;break;case"h":case o:n=36e5;break;case"d":case y:n=864e5;break;case"w":case D:n=6048e5;break;default:n=1e3}return new l(this.valueOf()+t*n)},t.subtract=function(t,e){return this.add(-1*t,e)},t.format=function(t){var e=this;return(t||"YYYY-MM-DDTHH:mm:ssZ").replace(s,function(t){if(-1<t.indexOf("["))return t.replace(/\[|\]/g,"");switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return String(e.$y);case"M":return String(e.$M+1);case"MM":return h(e.$M+1,2,"0");case"MMM":return r[e.$M].slice(0,3);case"MMMM":return r[e.$M];case"D":return String(e.$D);case"DD":return h(e.$D,2,"0");case"d":return String(e.$W);case"dddd":return n[e.$W];case"H":return String(e.$H);case"HH":return h(e.$H,2,"0");case"h":case"hh":return 0===e.$H?12:h(e.$H<13?e.$H:e.$H-12,"hh"===t?2:1,"0");case"a":return e.$H<12?"am":"pm";case"A":return e.$H<12?"AM":"PM";case"m":return String(e.$m);case"mm":return h(e.$m,2,"0");case"s":return String(e.$s);case"ss":return h(e.$s,2,"0");case"SSS":return h(e.$ms,3,"0");case"Z":return e.$zoneStr;default:return e.$zoneStr.replace(":","")}})},t.diff=function(t,e,n){var r,a,s,i,o,h,u=M(e),c=t instanceof l?t:new l(t),d=this-c,f=(r=this,i=12*((a=c).year()-r.year())+(a.month()-r.month()),o=r.clone().add(i,"months"),s=a-o<0?(a-o)/(o-r.clone().add(i-1,"months")):(a-o)/(r.clone().add(i+1,"months")-o),Number(-(i+s)));switch(u){case p:f/=12;break;case $:break;case"quarter":f/=3;break;case D:f=d/6048e5;break;case y:f=d/864e5;break;case m:f=d/1e3;break;default:f=d}return n?f:(h=f)<0?Math.ceil(h)||0:Math.floor(h)},t.daysInMonth=function(){return this.endOf($).$D},t.clone=function(){return new l(this)},t.toDate=function(){return new Date(this.$d)},t.toArray=function(){return[this.$y,this.$M,this.$D,this.$H,this.$m,this.$s,this.$ms]},t.toJSON=function(){return this.toISOString()},t.toISOString=function(){return this.toDate().toISOString()},t.toObject=function(){return{years:this.$y,months:this.$M,date:this.$D,hours:this.$H,minutes:this.$m,seconds:this.$s,milliseconds:this.$ms}},t.toString=function(){return this.$d.toUTCString()},l}(),function(t){return new d(t)})});function getMonthViewStartDay(t,e,n){var r=Number(e),a=dayjs_min(t).startOf(n);return a.day()!==r&&(a=a.subtract(a.day(),"day")),a=a.add(e,"day")}var genBody={methods:{genWeekTitle:function(e){var n=this.prefixCls+"-week-title",r=this.weekDateShort||this.weekLocaleData||this.localeData[this.locale],a=this.firstDay-1,t=r.map(function(t){return 7<=++a&&(a=0),e("div",{class:[n+"-item"]},[r[a]])});return e("div",{class:[n]},[t])},genCalendateItem:function(r){var a=this,s=this.genItemRow(r),i=[];return this.monthData.map(function(t,e){var n=r("div",{class:a.prefixCls+"-day-item"},[a.$scopedSlots.default?a.$scopedSlots.default(t):a.$slots.default]);s.children.push(n),0<e-1&&(e+1)%7==0&&(i.push(s),s=a.genItemRow(r))}),r("div",{class:[this.prefixCls+"-body"]},[i])},genItemRow:function(t){return t("div",{class:[this.prefixCls+"-body-row"]},[])}}},genHeader={props:{renderHeader:Function},computed:{headerDateText:function(){return"week"===this.mode?dayjs_min(this.formatedDay).startOf("week").format("YYYY-MM-DD")+" - "+dayjs_min(this.formatedDay).endOf("week").format("YYYY-MM-DD"):dayjs_min(this.formatedDay).format("YYYY-MM")}},methods:{genHeaderCenter:function(t){var e=t("a",{class:[this.prefixCls+"-control",this.prefixCls+"-prev"],on:{click:this.prev}},[this.prevNode||"<"]),n=t("a",{class:[this.prefixCls+"-control",this.prefixCls+"-next"],on:{click:this.next}},[this.nextNode||">"]),r=t("span",{class:[this.prefixCls+"-header-date"]},[this.headerDateText]);return this.renderHeader?this.renderHeader({prev:this.prev,next:this.next,selectedDate:this.headerDateText}):t("div",{class:[this.prefixCls+"-header-center"]},[e,r,n])},genHeader:function(t){var e=t("div",{class:[this.prefixCls+"-header-left"]},[this.$slots["header-left"]]),n=t("div",{class:[this.prefixCls+"-header-right"]},[this.$slots["header-right"]]);return t("div",{class:[this.prefixCls+"-header"]},[e,this.genHeaderCenter(t),n])}}},_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},prefixCls="vue-calendar";function checkType(t){return Object.prototype.toString.call(t)}var calendar$1={name:prefixCls,mixins:[genBody,genHeader],props:{startDate:[Number,String,Date],dateData:[Object,Array],matchKey:{type:String,default:"date"},locale:{type:String,default:"en"},firstDay:{type:Number,default:0},mode:{type:String,default:"month",validator:function(t){return"month"===t||"week"===t}},prefixCls:{type:String,default:prefixCls},weekDateShort:Array,onMonthChange:{type:Function,default:function(){}},onPrev:{type:Function,default:function(){}},onNext:{type:Function,default:function(){}},renderHeader:Function,weekLocaleData:Array},computed:{formatedDay:function(){return dayjs_min(new Date(this.currentDay))},monthData:function(){var e=this,r=this.dateData,t=this.formatedDay,n=this.firstDay,a=this.mode,s=this.matchKey,i=checkType(r);if(!t)return[];var o=getMonthViewStartDay(t,n,a),h=[],u=6;"week"===this.mode&&(u=1);for(var c=function(t){var n=[];"[object Object]"===i?Object.keys(r).forEach(function(t){var e=t.replace("-","/");o.isSame(dayjs_min(new Date(e)))&&n.push(r[t])}):"[object Array]"===i&&(n=r.filter(function(t){var e=t[s].replace("-","/");return o.isSame(dayjs_min(new Date(e)))})),h.push(_extends({},e.getItemStatus(o),{data:n||{},date:{year:o.year(),month:o.month()+1,date:o.date(),day:o.day(),full:o.format("YYYY-MM-DD")}})),o=o.add(1,"day")},d=0;d<7*u;d++)c();return h}},methods:{changeDate:function(t){if("string"!=typeof t&&"[object Date]"!==Object.prototype.toString.call(t))return console.error("invalied date!"),!1;this.currentDay=t},prev:function(){var t=this.formatedDay,e=this.mode,n=this.onPrev,r=this.monthData;this.currentDay=t.subtract(1,e).startOf(e).format("YYYY-MM-DD"),n({startDay:r[0].date,endDay:r[r.length-1].date})},next:function(){var t=this.formatedDay,e=this.mode,n=this.onNext,r=this.monthData;this.currentDay=t.add(1,e).startOf(e).format("YYYY-MM-DD"),n({startDay:r[0].date,endDay:r[r.length-1].date})},getItemStatus:function(t){var e=dayjs_min(t),n=this.formatedDay,r=e.month()===n.month(),a=!r&&e.isBefore(this.formatedDay,"month"),s=!r&&e.isAfter(this.formatedDay,"month");return{isPrevMonth:a,isPrevLastDay:!!a&&e.isSame(e.endOf("month").format("YYYY-MM-DD")),isNextMonth:s,isNextFirstDay:!!s&&e.isSame(e.startOf("month").format("YYYY-MM-DD")),isToday:t.format("YYYY-MM-DD")===dayjs_min(this.today).format("YYYY-MM-DD"),isCurMonth:r}},changeViewData:function(){this.onMonthChange({startDay:this.monthData[0].date,endDay:this.monthData[this.monthData.length-1].date})}},watch:{startDate:{immediate:!0,handler:function(t){this.currentDay=t?new Date(t):new Date,this.today||(this.today=this.currentDay)}},currentDay:{immediate:!0,handler:function(t,e){this.changeViewData()}},mode:function(t){this.changeViewData()}},data:function(){return{today:this.currentDay,currentDay:null,localeData:{"zh-cn":"周日_周一_周二_周三_周四_周五_周六".split("_"),en:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_")}}},render:function(t){return t("div",{class:[this.prefixCls,"is-"+this.mode]},[this.genHeader(t),this.genWeekTitle(t),this.genCalendateItem(t)])}};module.exports=calendar$1;